<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hymn Singing Viz</title>



  <script type="module" src="/src/main.ts"></script>
</head>

<body>

<header>
  <h1>Hearing the Data â€” Guided Singing (MVP)</h1>
  <p>Tone.js synth + mic pitch tracking + moving playhead</p>
  <button id="themeToggle" style="margin-top:10px;width:auto;padding:8px 14px;">
  ðŸŒ™ Dark Mode
</button>

  <div class="sound-bars">
    <span></span><span></span><span></span><span></span><span></span>
  </div>
</header>

<main>

  <section class="card">
    <div class="label">Step 1</div>

    <div class="live-status">
      <span></span> Listening...
    </div>

    <button id="btnStart">Enable Audio + Mic</button>

    <div class="label">Step 2</div>
    <div class="row">
      <button id="btnPlay" disabled>Play Phrase</button>
      <button id="btnStop" class="secondary" disabled>Stop</button>
    </div>

    <div class="label">Mic level</div>
    <div class="meter"><div id="micFill"></div></div>
  </section>

  <section class="card" style="position:relative;">
    <canvas id="viz" width="1100" height="360"></canvas>
    <div class="canvas-glow"></div>

    <div style="display:flex;justify-content:space-between;margin-top:10px;font-size:13px;color:#555;">
      <div>Time â†’</div>
      <div>Pitch (Doâ€“Ti)</div>
    </div>
  </section>

  <section class="card">
    <div class="label">Doâ€“Ti mapping</div>
    <div class="legend">
      <span>Do=1</span><span>Re=2</span><span>Mi=3</span>
      <span>Fa=4</span><span>So=5</span><span>La=6</span><span>Ti=7</span>
    </div>

    <div class="label">Current readings</div>
    <div style="font-size:13px;line-height:1.5;">
      Target MIDI: <code id="targetMidi">â€”</code><br/>
      User MIDI: <code id="userMidi">â€”</code><br/>
      Error (cents): <code id="cents">â€”</code><br/>
      Voiced: <code id="voiced">â€”</code>
    </div>
  </section>

</main>

</body>
</html>
